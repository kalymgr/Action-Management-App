{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block page_title %}{{g.userResourceStrings.TXT_EDIT_USER}}{% endblock %}
{% block content %}
        <form action="#" method="post">
            <p class="row">
                <label for="name" class="col text-right">{{g.userResourceStrings.FRM_FULL_NAME}}</label>
                <span class="col"> <input id="name" type="text" name="name" value="{{ user.name }}"></span>
            </p>
            <p class="row">
                <label for="username" class="col text-right">{{g.userResourceStrings.FRM_USERNAME}}</label>
                <span class="col"><input type="text" id="username" name="username" value="{{ user.username }}"></span>
            </p>
            <p class="row">
                <label for="department" class="col text-right">{{g.userResourceStrings.FRM_DEPARTMENT}}</label>
                <span class="col"><input type="text" id="department" name="department" value="{{ user.department }}"></span>
            </p>
            <p class="row">
                <label for="usercategory" class="col text-right">{{g.userResourceStrings.FRM_USER_CATEGORY}}</label>
                <span class="col">
                    {% if g.user.userCategoryId != 3 %}  <!-- if the user isn't super administrator -->
                <span id="usercategory" name="usercategory" disabled> <!-- disable the category selection -->
            {% else %}
                <select id="usercategory" name="usercategory">
            {% endif %}
                {%  for cat in userCategories %}
                    {% if user.userCategoryId == cat.id%} <!-- select the category of the user -->
                        <option value="{{ cat.id }}" selected>{{ cat.name }}</option>
                    {% else %}
                        <option value="{{ cat.id }}">{{ cat.name }}</option>
                    {% endif %}
                {%  endfor %}
                </select> </span>
            </p>
            <p class="row">
                <label for="phone" class="col text-right">{{g.userResourceStrings.FRM_PHONE}}</label>
                <span class="col "><input id="phone" type="text" name="phone" value="{{ user.phone }}"></span>
            </p>
            <p class="row">
                <label for="mobile" class="col text-right">{{g.userResourceStrings.FRM_MOBILE}}</label>
                <span class="col"><input id="mobile" type="text" name="mobile" value="{{ user.mobile }}"></span>
            </p>
            <p class="row">
                <label for="email" class="col text-right">{{g.userResourceStrings.FRM_EMAIL}}</label>
                <span class="col"><input id="email" type="text" name="email" value="{{ user.email }}"></span>
            </p>
            <p class="row">
                <label for="enabled" class="col text-right">{{g.userResourceStrings.FRM_ENABLED}}</label>
            {% if user.enabled == True %} <!-- set the checkbox checked if true -->
                <span class="col"><input id="enabled" type="checkbox" name="enabled" checked></span>
            {% else %}
                <span class="col"><input id="enabled" type="checkbox" name="enabled"></span>
            {% endif %}
            </p>
            <div class="row">
                <span class="col d-flex justify-content-center">
                    <input type="submit" value="{{g.generalResourceStrings.FRM_SAVE}}">
                </span>
            </div>

        </form>
        <div class="row">
            <div class="col d-flex justify-content-center">
            <form action="{{url_for('users.changeUserPassword', user_id=user.id)}}" method="get"> <!-- Button for changing the user password -->
                <input type="submit" value="{{g.userResourceStrings.FRM_CHANGE_PASSWORD}}">
            </form>
            </div>
        </div>


    {{ macros.showBacktoUserListNav() }}

{% endblock %}